"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,r){return(o=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function s(e,r){return!r||"object"!=typeof r&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=i(e);if(r){var n=i(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return s(this,t)}}function l(e){var r=[],t="";for(var a in e)r.push(e[a]);return r.length>0&&(r.sort(),t=r.join(".")),t}function y(e,r){var t={};return t.errCode=e,t.errMsg=r,t}function u(e,r){e=e.split("."),r=r.split(".");for(var t=Math.max(e.length,r.length);e.length<t;)e.push("0");for(;r.length<t;)r.push("0");for(var a=0;a<t;a++){var n=parseInt(e[a]),i=parseInt(r[a]);if(n>i)return 1;if(n<i)return-1}return 0}var d=function(){function r(t,a){e(this,r),this.bridge=t,this.jssdk=a,this.syncDataZone={},this.syncDataListener={}}return t(r,[{key:"addListener",value:function(e,r){if(e)if("function"==typeof r){var t=this.syncDataListener[e];t||(t=[],this.syncDataListener[e]=t),t.push(r)}else console.error("DataSync addListener: listener is not function");else console.error("DataSync addListener: key is undefined")}},{key:"removeListener",value:function(e,r){if(e)if("function"==typeof r){var t=this.syncDataListener[e];if(t){for(var a,n=0,i=t.length;n<i;n++)if(t[n]===r){a=n;break}void 0!==a&&t.slice(a,1)}}else console.error("DataSync addListener: listener is not function");else console.error("DataSync addListener: key is undefined")}},{key:"startSyncData",value:function(e,r,t){var a=this;if(!e)return console.error("startSyncData: Key is null!"),void(r&&r({errCode:2,errMsg:"Params Error"}));if(this.syncDataZone[e]&&this.syncDataZone[e].arrayIdPath===t)r&&r({errCode:0});else{var n={key:e,operationType:"start",idPath:t},i=this.jssdk.allocateId();this.jssdk.on(i,(function(n){if(0===n.errCode){var i=a.onStartSyncData(e,t);r&&r(i)}else r&&r(n)})),this.bridge.syncDataFromJS(JSON.stringify(n),i)}}},{key:"stopSyncData",value:function(e,r){var t=this;if(!e)return console.error("stopSyncData: Key is null!"),void(r&&r({errCode:2,errMsg:"Params Error"}));if(this.syncDataZone[e]){var a={key:e,operationType:"stop"},n=this.jssdk.allocateId();this.jssdk.on(n,(function(e){if(0===e.errCode){var n=t.onStopSyncData(a.key);r&&r(n)}else r&&r(e)})),this.bridge.syncDataFromJS(JSON.stringify(a),n)}else r&&r({errCode:1,errMsg:"DataSync has already stoped!"})}},{key:"setArrayData",value:function(e,r,t){var a=this;if(!e||!Array.isArray(r))return console.error("DataSync setArrayData: Key: ".concat(e," is null or data is not array!")),void(t&&t({errCode:2,errMsg:"Params Error"}));var n={key:e,operationType:"setArray",changedData:r},i=this.jssdk.allocateId();this.jssdk.on(i,(function(n){if(0===n.errCode){var i=a.onSetArrayData(e,r);t&&t(i)}else t&&t(n)})),this.bridge.syncDataFromJS(JSON.stringify(n),i)}},{key:"getArrayData",value:function(e){if(e){var r=this.syncDataZone[e];if(r){var t=r.arrayIdList,a=r.arrayData;if(t){if(!a)return[];for(var n=[],i=0,o=t.length;i<o;i++){var s=t[i];a[s]?n.push(a[s]):console.error("DataSync getArrayData: Data object for id: ".concat(s," is not exist"))}return n}console.error("DataSync getArrayData: idList for key: ".concat(e," is not initialized"))}else console.error("DataSync getArrayData: syncDataZone for key: ".concat(e," is not initialized"))}else console.error("DataSync getArrayData: Key is null!")}},{key:"appendArrayData",value:function(e,r,t){var a=this;if(!e||!Array.isArray(r))return console.error("DataSync appendArrayData: Key: ".concat(e," is null or data: ").concat(r," is not array!")),void(t&&t({errCode:2,errMsg:"Params Error"}));var n={key:e,operationType:"appendArray",changedData:r},i=this.jssdk.allocateId();this.jssdk.on(i,(function(n){if(0===n.errCode){var i=a.onAppendArrayData(e,r);t&&t(i)}else t&&t(n)})),this.bridge.syncDataFromJS(JSON.stringify(n),i)}},{key:"setStringData",value:function(e,r,t,a){var n=this;if(!e||null==r)return console.error("DataSync setStringData: Key: ".concat(e," is null or data is null!")),void(t&&t({errCode:2,errMsg:"Params Error"}));var i={key:e,operationType:"setString",changedData:r,disposable:a,timestamp:(new Date).getTime()},o=this.jssdk.allocateId();this.jssdk.on(o,(function(o){if(0===o.errCode){var s=n.onSetStringData(e,r,a,i.timestamp);t&&t(s)}else t&&t(o)})),this.bridge.syncDataFromJS(JSON.stringify(i),o)}},{key:"getStringData",value:function(e){if(e){var r=this.syncDataZone[e];if(r){if(r.stringData){var t=r.stringData,a=t.data;return t.disposable&&this.setStringData(e,""),a}}else console.error("DataSync getStringData: syncDataZone for key: ".concat(e," is not initialized"))}else console.error("DataSync getStringData: Key is null!")}},{key:"peekStringData",value:function(e){if(e){var r=this.syncDataZone[e];if(r){if(r.stringData)return r.stringData.data}else console.error("DataSync peekStringData: syncDataZone for key: ".concat(e," is not initialized"))}else console.error("DataSync peekStringData: Key is null!")}},{key:"removeArrayData",value:function(e,r,t){var a=this;if(!e||!Array.isArray(r))return console.error("DataSync removeArrayData: Key: ".concat(e," is null or data: ").concat(r," is not array!")),void(t&&t({errCode:2,errMsg:"Params Error"}));var n=this.syncDataZone[e];if(!n)return console.error("DataSync removeArrayData: DataSync is not started!"),void(t&&t({errCode:1,errMsg:"DataSync is not started"}));var i=n.arrayIdPath;if(!i)return console.error("DataSync removeArrayData: idPath is not setted!"),void(t&&t({errCode:1,errMsg:"IdPath is not setted!"}));var o=r.map((function(e){return e[i]})),s={key:e,operationType:"removeArray",changedData:o},c=this.jssdk.allocateId();this.jssdk.on(c,(function(r){if(0===r.errCode){var n=a.onRemoveArrayData(e,o);t&&t(n)}else t&&t(r)})),this.bridge.syncDataFromJS(JSON.stringify(s),c)}},{key:"sortArrayData",value:function(e,r,t){if(!e||!Array.isArray(r))return console.error("DataSync sortArrayData: Key: ".concat(e," is null or data: ").concat(r," is not array!")),void(t&&t({errCode:2,errMsg:"Params Error"}));var a=this.syncDataZone[e];if(!a)return console.error("DataSync sortArrayData: DataSync is not started!"),void(t&&t({errCode:1,errMsg:"DataSync is not started"}));var n=a.arrayIdPath,i=a.arrayIdList,o={};i.forEach((function(e){o[e]=1}));for(var s=[],c=0,l=r.length;c<l;c++){var y=r[c][n];o[y]?(s.push(y),delete o[y]):console.info("DataSync sortArrayData: id sorted is not in idList")}for(var e in o)s.push(e);var u=!1,d=0;for(l=Math.min(s.length,i.length);d<l;d++){var f=s[d];if(i[d]!==f){u=!0;break}}if(!u)return console.log("DataSync sortArrayData: Data has not changed, compelte now!"),void(t&&t({errCode:0}));a.arrayIdList=s;var h={key:e,operationType:"sortArray",changedData:s},p=this.jssdk.allocateId();this.jssdk.on(p,(function(e){t&&t(e)})),this.bridge.syncDataFromJS(JSON.stringify(h),p)}},{key:"syncDataFromNative",value:function(e){if(!e||!e.key||!e.operationType)return console.error("DataSync syncDataFromNative: Params Error: ".concat(JSON.stringify(e))),JSON.stringify({errCode:2,errMsg:"Params Error"});var r;switch(e.operationType){case"setArray":r=this.onSetArrayData(e.key,e.changedData);break;case"appendArray":r=this.onAppendArrayData(e.key,e.changedData);break;case"removeArray":r=this.onRemoveArrayData(e.key,e.changedData);break;case"start":r=this.onStartSyncData(e.key,e.arrayIdPath);break;case"stop":r=this.onStopSyncData(e.key);break;case"setString":r=this.onSetStringData(e.key,e.changedData,e.disposable,e.timestamp,!0)}if("setArray"===e.operationType||"appendArray"===e.operationType||"removeArray"===e.operationType||"setString"===e.operationType){var t=this.syncDataListener[e.key];if(t)for(var a=0,n=t.length;a<n;a++){var i=t[a];"function"==typeof i&&i(e)}}return JSON.stringify(r)}},{key:"onSetStringData",value:function(e,r,t,a,n){if(!e||null==r)return console.error("DataSync onSetStringData: Key or data is null!"),{errCode:2,errMsg:"Params Error"};var i=this.syncDataZone[e];if(!i)return console.error("DataSync onSetStringData: Data is null!"),{errCode:1,errMsg:"DataSync is not started"};if(n&&(a&&i.stringData&&i.stringData.timestamp&&(new Date).getTime()>=i.stringData.timestamp&&a<i.stringData.timestamp))return{errCode:0};return i.stringData={data:r,disposable:t,timestamp:a},{errCode:0}}},{key:"onSetArrayData",value:function(e,r){if(!e||!r)return console.error("DataSync onSetData: Key or data is null!"),{errCode:2,errMsg:"Params Error"};var t=this.syncDataZone[e];if(!t)return console.error("DataSync onSetData: Data is null!"),{errCode:1,errMsg:"DataSync is not started"};for(var a=t.arrayIdPath,n=[],i={},o=0,s=r.length;o<s;o++){var c=r[o],l=c[a];i[l]||n.push(l),i[l]=c}return t.arrayIdList=n,t.arrayData=i,{errCode:0}}},{key:"onAppendArrayData",value:function(e,r){if(!e||!r)return console.error("DataSync onAppendData: Key or data is null!"),{errCode:2,errMsg:"Params Error"};var t=this.syncDataZone[e];if(!t)return console.error("DataSync onAppendData: Data is null!"),{errCode:1,errMsg:"DataSync is not started"};for(var a=t.arrayIdPath,n=t.arrayIdList,i=t.arrayData,o=0,s=r.length;o<s;o++){var c=r[o],l=c[a];i[l]||n.push(l),i[l]=c}return{errCode:0}}},{key:"onRemoveArrayData",value:function(e,r){if(!e||!r)return console.error("DataSync onAppendData: Key or data is null!"),{errCode:2,errMsg:"Params Error"};var t=this.syncDataZone[e];if(!t)return console.error("DataSync onAppendData: Data is null!"),{errCode:1,errMsg:"DataSync is not started"};for(var a=t.arrayIdList,n=t.arrayData,i=0,o=r.length;i<o;i++){var s=r[i];n[s]&&delete n[s]}return a=a.filter((function(e){return void 0!==n[e]})),t.arrayIdList=a,{errCode:0}}},{key:"onStartSyncData",value:function(e,r){if(!e)return console.error("DataSync onAppendData: Key is null!"),{errCode:2,errMsg:"Params Error"};if(this.syncDataZone[e]&&this.syncDataZone[e].arrayIdPath===r)return{errCode:0};var t={idPath:r,dataMap:{},idList:[]};return this.syncDataZone[e]=t,{errCode:0}}},{key:"onStopSyncData",value:function(e){return e?this.syncDataZone[e]?(delete this.syncDataZone[e],delete this.syncDataListener[e],{errCode:0}):{errCode:1,errMsg:"DataSync is already stoped"}:(console.error("DataSync onAppendData: Key is null!"),{errCode:2,errMsg:"Params Error"})}}]),r}(),f=function(){function r(t){e(this,r),this.bridge=t,this.service={}}return t(r,[{key:"invokeCallback",value:function(e,r){"function"==typeof e?e(r):"number"==typeof e?this.bridge.onJSCallback(e,JSON.stringify(r)):console.warn("Service callback: ".concat(e," is illegal"))}},{key:"registerService",value:function(e){if(e.id&&0!==e.id.length){var r=this.service[e.id];for(var t in r||(r={},this.service[e.id]=r),e)"id"!==t&&("function"==typeof e[t]?r[t]=e[t]:console.warn("Service registerService: ".concat(t," is not a function")))}else console.error("Service registerService: id is null")}},{key:"callServiceSync",value:function(e,r,t){var a=this.checkServiceInput(e,r);if(0!==a.errCode)return a;var n=(0,this.service[e][r])(t);return void 0===n.errCode&&(n.errCode=0),JSON.stringify(n)}},{key:"callServiceAsync",value:function(e,r,t,a){var n=this.checkServiceInput(e,r);0===n.errCode?(0,this.service[e][r])(t,function(e){void 0===e.errCode&&(e.errCode=0),a&&this.invokeCallback(a,e)}.bind(this)):this.invokeCallback(a,n)}},{key:"checkServiceInput",value:function(e,r){var t={errCode:0};if(!e||0===e.length)return console.warn("Service checkServiceInput: id is null"),t.errCode=2,t.errMsg="Parameters Error",t;if(!r||0===r.length)return console.warn("Service checkServiceInput: action is null"),t.errCode=2,t.errMsg="Parameters Error",t;var a=this.service[e];return a?(a[r]||(console.warn("Service checkServiceInput: service action is not supported"),t.errCode=4,t.errMsg="Not Support"),t):(console.warn("Service checkServiceInput: service is not supported"),t.errCode=4,t.errMsg="Not Support",t)}},{key:"setupSortService",value:function(e){e.registerSortService=function(r){3===Object.keys(r).length&&r.id&&r.onDataChanged&&r.sortData?(this.registerService(r),e.DataSync.addListener(r.id,function(t){var a=e.DataSync.getArrayData(r.id);this.callServiceAsync(r.id,"onDataChanged",a)}.bind(this))):console.error("Service registerSortService: Params Error")}.bind(this),e.Service.triggerSort=function(r){if(r&&r.id){var t=r.id,a=r.complete,n=e.DataSync.getArrayData(t);if(n)this.callServiceAsync(t,"sortData",n,function(r){r.result?e.DataSync.sortArrayData(t,r.result,function(e){this.invokeCallback(a,e)}.bind(this)):this.invokeCallback(a,r)}.bind(this));else{this.invokeCallback(a,{errCode:1,errMsg:"Data to sort is empty"})}}else{console.error("Service triggerSort: Params Error");r&&this.invokeCallback(r.complete,{errCode:2,errMsg:"Params Error"})}}.bind(this)}}]),r}(),h=function(){function r(t){e(this,r),this.callback={},this.bridge=t,this.service={}}return t(r,[{key:"on",value:function(e,r){var t=this.callback[e]||[];-1===t.indexOf(r)&&(t.push(r),this.callback[e]=t)}},{key:"off",value:function(e,r){var t=(this.callback[e]||[]).indexOf(r);t>=0&&this.callback[e].splice(t,1)}},{key:"invokeCallback",value:function(e,r){void 0!==e?((this.callback[e]||[]).forEach((function(e){e&&e(r)})),delete this.callback[e]):console.warn("invokeCallback callbackId is null")}},{key:"dispatchJsEvent",value:function(e,r){(this.callback[e]||[]).forEach((function(e){e&&e(r)}))}}]),r}(),p=function(){function r(t,a){e(this,r),this.name=t,this.jsSdk=a}return t(r,[{key:"register",value:function(e,r){var t={};if(!e)return console.error("JsApiListener register: keyList is null"),y(1,"keyList is null.");var a=l(e);this.jsSdk.jsApiListenerMap[this.name]||(this.jsSdk.jsApiListenerMap[this.name]={});var n=this.jsSdk.jsApiListenerMap[this.name],i=n[a];if(!i||0===i.length){t.type=1,t.keyList=e;var o=this.jsSdk.callNativeSync(this.name,t);return 0===o.errCode&&((i=[]).push(r),n[a]=i),console.info("JsApi listener register with native: ".concat(this.name)),o}return-1!==i.indexOf(r)?y(1,"listener is already existed."):(i.push(r),console.info("JsApi listener register: ".concat(this.name)),y(0,""))}},{key:"unregister",value:function(e,r){var t=l(e=e||{}),a=this.jsSdk.jsApiListenerMap[this.name];if(!a)return console.error("JsApiListener unregister: listeners for jsapi is empty"),y(1,"listener is not found.");var n=a[t];if(!n||0===n.length)return console.error("JsApiListener unregister: listeners for key is empty"),y(1,"listener is not found.");var i=n.indexOf(r);if(-1===i)return console.error("JsApiListener unregister: listener is not found"),y(1,"listener is not found.");if(n.splice(i,1),0===n.length){var o={type:0};o.keyList=e;var s=this.jsSdk.callNativeSync(this.name,o);return s&&0===s.errCode||n.push(r),console.info("JsApi listener unregister with native: ".concat(this.name)),s}return console.info("JsApi listener unregister: ".concat(this.name)),y(0,"")}}]),r}(),v=function(r){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&o(e,r)}(n,h);var a=c(n);function n(r){var t;return e(this,n),(t=a.call(this,r)).jsApiListenerMap={},t.appVersionResMap={},t.systemVersionResMap={},t}return t(n,[{key:"addJSApi",value:function(e,r){var t=this;r.forEach((function(r){var a=r.endsWith("Sync"),n=r.endsWith("Listener");e[r]=n?new p(r,t):a?function(e){e=e||{};var a={};return Object.keys(e).forEach((function(r){"function"!=typeof e[r]&&(a[r]=e[r])})),console.info("JsApi invoke sync: "+r),t.callNativeSync(r,a)}:function(e){e=e||{};var a=t.allocateId(),n={};Object.keys(e).forEach((function(r){"function"!=typeof e[r]&&(n[r]=e[r])})),t.on(a,(function(r){r.errCode&&0!==r.errCode?e.fail&&e.fail(r||{}):e.success&&e.success(r||{}),e.complete&&e.complete(r||{})})),console.info("JsApi invoke async: "+r),t.callNativeAsync(r,n,a)}}))}},{key:"isSupport",value:function(e,r){if(!r||0===r.length)return console.error("isSupport: Schema format is not correct!"),!1;var t=r.split(".");if(0===t.length)return console.error("isSupport: Schema format is not correct!"),!1;if("Almighty"!==t[0])return this.isPropertyExist(e,t);if(t.shift(),0===t.length)return!0;var a=t[0];if(!e.Almighty[a])return!1;var n=this.bridge.JSAPIDefine&&this.bridge.JSAPIDefine[a];return n?(t.shift(),0===t.length||this.isPropertyExist(n,t)):this.isPropertyExist(e.Almighty,t)}},{key:"isPropertyExist",value:function(e,r){if(!r||0===r.length)return!0;var t=r.shift();return void 0!==e[t]&&this.isPropertyExist(e[t],r)}},{key:"isDebug",value:function(){return"debug"===this.bridge.environment}},{key:"compareAppVersionWith",value:function(e){var r=this.bridge.appVersion,t=e;return r&&t?(this.appVersionResMap[t]||(this.appVersionResMap[t]=u(r,t)),this.appVersionResMap[t]):-1}},{key:"compareSystemVersionWith",value:function(e){var r=this.bridge.systemVersion,t=e;return r&&t?(this.systemVersionResMap[t]||(this.systemVersionResMap[t]=u(r,t)),this.systemVersionResMap[t]):-1}},{key:"addNativeEvent",value:function(e,r){r.forEach((function(r){e[r]=function(t){e.on(r,(function(e){t&&t(e)}))}}))}},{key:"callNativeAsync",value:function(e,r,t){try{if(!this.bridge)return console.warn("callNativeAsync, Bridge is undefined"),void this.callbackFromNative(t,{errCode:6,errMsg:"Framework Error"});this.bridge.invokeAsync(e,JSON.stringify(r),t)}catch(r){console.error("callNativeAsync, call jsapi:".concat(e," failed!"))}}},{key:"callNativeSync",value:function(e,r){try{if(!this.bridge)return console.warn("callNativeSync, Bridge is undefined"),{errCode:6,errMsg:"Framework Error"};var t=this.bridge.invokeSync(e,JSON.stringify(r));return t=JSON.parse(t)}catch(r){console.error("callNativeSync call jsapi:".concat(e," failed!"))}return{errCode:7,errMsg:"Native Return Invalid Data"}}},{key:"dispatch",value:function(e,r,t){this.bridge?this.bridge.dispatch(e,JSON.stringify(r),t):console.error("dispatch error: Bridge is undefined")}},{key:"allocateId",value:function(){return this.idPool=this.idPool||0,++this.idPool}}]),n}();var g,D,S,k=["getSystemInfo","getSystemInfoSync","getUserInfo","getUserInfoSync"],m=["onDispatchData"];void 0===String.prototype.endsWith&&(String.prototype.endsWith=function(e){return new RegExp(e+"$").test(this)}),D=function(e,r,t){if(!e.Almighty){var a=new v(__JSBridge),n=new d(__JSBridge,a),i=new f(__JSBridge);__JSBridge=void 0;try{Object.defineProperty(e,"Almighty",{value:{onNativeEvent:a.dispatchJsEvent.bind(a),onNativeCallback:a.invokeCallback.bind(a),on:a.on.bind(a),isSupport:a.isSupport.bind(a,e),Env:{mode:a.bridge.environment,isDebug:a.isDebug.bind(a),appVersion:a.bridge.appVersion,platform:a.bridge.platform,systemVersion:a.bridge.systemVersion,pluginId:a.bridge.pluginId,compareAppVersionWith:a.compareAppVersionWith.bind(a),compareSystemVersionWith:a.compareSystemVersionWith.bind(a)},Service:{registerService:i.registerService.bind(i),callServiceSync:i.callServiceSync.bind(i),callServiceAsync:i.callServiceAsync.bind(i)},DataSync:{syncDataFromNative:n.syncDataFromNative.bind(n),addListener:n.addListener.bind(n),removeListener:n.removeListener.bind(n),startSyncData:n.startSyncData.bind(n),stopSyncData:n.stopSyncData.bind(n),setArrayData:n.setArrayData.bind(n),appendArrayData:n.appendArrayData.bind(n),removeArrayData:n.removeArrayData.bind(n),sortArrayData:n.sortArrayData.bind(n),getArrayData:n.getArrayData.bind(n),getStringData:n.getStringData.bind(n),setStringData:n.setStringData.bind(n),peekStringData:n.peekStringData.bind(n)}},writable:!1,configurable:!1})}catch(e){console.error("setupAlmighty: Define Almighty failed!")}return a.addJSApi(e.Almighty,r),a.addNativeEvent(e.Almighty,t),i.setupSortService(e.Almighty),a}console.info("setupAlmighty: Almighty has defined, skip")}(g=this,k,m),S={},g.Almighty.addFilter=function(e,r){"function"==typeof r.match&&(S[e]=r)},g.Almighty.removeFilter=function(e){delete S[e]},g.Almighty.onDispatchData((function(e){Object.keys(S).forEach((function(r){var t=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e),i=S[r];if("function"==typeof i.match&&i.match(t)){var o=i.execute;o&&"function"==typeof i.execute?o({dispatch:function(e){D.dispatch("onDispatchData",e,r)}},t):D.dispatch("onDispatchData",t,r)}}))})),console.log("evaluate Filter common-library script finish.");
//# sourceMappingURL=Filter.js.map
